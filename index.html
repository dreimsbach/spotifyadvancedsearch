<!DOCTYPE html>
<html>
<head>
  <title>Dirk Reimsbachs Spotify Label News</title>
  

  <link rel="stylesheet" type="text/css" href="css/base.css">
  <link rel="stylesheet" type="text/css" href="css/tailwind.css">

  <meta name="viewport" content="width = device-width" />
  <meta http-equiv="Cache-control" content="no-cache">
</head>

<body class="font-thin text-base">
  <a href="https://github.com/dreimsbach/spotifyadvancedsearch" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#64CEAA; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  <!-- Content -->
  <div class="container mx-auto">
    <div class="my-4 font-thin text-lg">
     <h1>Find stuff by searching for record labels</h1>
    </div>

    <div id="login-button-container">
      <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full" id="btn-login">login</button>
    </div>

    <div id="toggle">
      <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-full">show search</button>
    </div>

    <div id="controls" class="my-4">
      <div id="logged-in-content-container">
        <form id="search-form" class="w-full max-w-screen-md">
          <div class="flex items-center border-b border-green-500 py-2">
            <input type="text" autocapitalize="off" autocorrect="off" spellcheck="false" id="label" value="" placeholder="label" class="appearance-none bg-transparent border-none w-full text-gray-700 mr-5 py-1 px-2 leading-tight focus:outline-none"/>
            <input type="text" autocapitalize="off" autocorrect="off" spellcheck="false" id="year" value="" placeholder="year (default: last 2 weeks)" class="appearance-none bg-transparent border-none w-full text-gray-700 mr-5 py-1 px-2 leading-tight focus:outline-none"/>
            <button type="submit" id="search-direct-btn" class="font-bold flex-shrink-0 bg-green-500 hover:bg-green-700 border-green-500 hover:border-green-700 border-4 text-white py-1 px-2 rounded">
              Search directly
            </button>
          </div>
        </form>
        <div class="my-8">
          <span>List controls: </span>
          <button id="add-to-list-btn" class="bg-green-500 hover:bg-green-700 text-white py-1 px-2 rounded">Add to List</button>
          <button id="upload-from-list-btn" class="bg-green-500 hover:bg-green-700 text-white py-1 px-2 rounded">Upload List From File</button>
          <button id="upload-from-url-btn" class="bg-green-500 hover:bg-green-700 text-white py-1 px-2 rounded">Upload List From Url</button>
        </div>

        <div id="file-upload-container" class="my-4">
          <form>
            <input type="file" id="label-file" class="appearance-none bg-transparent border-green-500 w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none" value="Upload File" />
          </form>
        </div>

        <div id="url-upload-container" class="my-4">
          <form id="url-update-form">
            <input type="text" id="label-url-list" class="appearance-none bg-transparent border-green-500 w-full text-gray-700 mr-3 py-1 px-2 leading-tight focus:outline-none" value="https://spotifysearch.reimsbach.dev/demolist/labellist.txt" />
            <button type="submit" id="search-direct-btn" class="flex-shrink-0 bg-green-500 hover:bg-green-700 border-green-500 hover:border-green-700 text-sm border-4 text-white py-1 px-2 rounded">
              Update from URL
            </button>
          </form>
        </div>

        <div class="my-4">
          <button id="find-records" class="bg-green-500 hover:bg-green-700 text-white py-1 px-2 rounded">Find from list</button>
        </div>

        <div id="labels-container" class="my-4">
          <h2>Label List (<span id="clear-history">clear all</span>, click label to remove)</h2>
          <div class="last-searches-container-inner p-2 max-w-sm">
            <ul id="last-searches" class="list-disc"></ul>
          </div>
        </div>
      </div>
    </div>
      
    <div id="results"></div>
    <div id="loading-indicator" class="hidden">
      <div class="flex items-center justify-center space-x-2 my-4">
        <div class="w-4 h-4 bg-green-500 rounded-full animate-pulse"></div>
        <div class="w-4 h-4 bg-green-500 rounded-full animate-pulse delay-75"></div>
        <div class="w-4 h-4 bg-green-500 rounded-full animate-pulse delay-150"></div>
      </div>
    </div>
  </div>

  <!-- Content -->

  <!-- Libraries -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" 
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" 
    crossorigin="anonymous"></script>
  <script src="https://unpkg.com/handlebars@4.7.8/dist/handlebars.min.js" 
    integrity="sha384-/7IOPDPk7kcWe970wNJpeApuC/EzCQwonLz5G/s//R5Jji9QWBcbfASHI0G1nh2p" 
    crossorigin="anonymous"></script>
  <script src="js/auth.js"></script>
  <script src="js/base.js"></script>

  <!-- Templates -->
  <script id="results-template" type="text/x-handlebars-template">
    {{#each this}}
    <div class="album-container">
      <div class="cover" data-album-url="{{uri}}">
        <img src="{{coverimage}}" alt="{{album}} by {{artist}}" />
        {{#if newFlag}}
        <div class="new-flag">NEW</div>
        {{/if}}
      </div>
      <div class="info">
        <div class="artist">{{artist}}</div>
        <div class="album">{{album}}</div>
        <div class="label">{{label}}</div>
        <div class="release">{{releaseDate}}</div>
        <div class="album-type">{{capitalize album_type}}</div>
        <div class="track-count">{{total_tracks}} tracks</div>
        <div class="apple-music">
          <button class="apple-music-link" data-artist="{{artist}}" data-album="{{album}}">
            <svg class="w-5 h-5 inline-block mr-1" viewBox="0 0 24 24" fill="currentColor">
              <path d="M23.997 6.124c0-.738-.065-1.47-.24-2.19-.317-1.31-1.062-2.31-2.18-3.043C21.003.517 20.373.195 19.7.098c-.217-.017-.438-.023-.658-.028-.31-.004-.62-.004-.93-.004h12.224c.31 0 .62 0 .93.004.22.005.44.011.658.028.673.097 1.303.42 1.877.784 1.117.733 1.862 1.734 2.18 3.043.174.72.24 1.452.24 2.19v11.752c0 .737.066 1.47.24 2.19.318 1.31 1.063 2.31 2.18 3.043.574.365 1.204.687 1.877.784.218.017.438.023.658.028.31.004.62.004.93.004h12.224c.31 0 .62 0 .93-.004.22-.005.44-.011.658-.028.673-.097 1.303-.42 1.877-.784 1.117-.733 1.862-1.734 2.18-3.043.174-.72.24-1.452.24-2.19V6.124z"/>
            </svg>
            Open in Apple Music
          </button>
        </div>
      </div>
    </div>
    {{/each}}
  </script>

  <script id="album-template" type="text/x-handlebars-template">
    {{#each albums}}
    <div class="album">
      <div class="album-inner">
        {{#if images.length}}
          <a href="{{external_urls.spotify}}" target="_blank">
            <img src="{{images.0.url}}" alt="{{name}}">
          </a>
        {{/if}}
        {{#if isNew}}<div class="new-flag">NEW</div>{{/if}}
        <div class="album-details">
          <h3><a href="{{external_urls.spotify}}" target="_blank">{{name}}</a></h3>
          <p class="artists">{{#each artists}}{{#if @index}}, {{/if}}<a href="{{external_urls.spotify}}" target="_blank">{{name}}</a>{{/each}}</p>
          <p class="release-date">{{release_date}}</p>
          <p class="album-meta">
            <span class="album-type">{{capitalize type}}</span> â€¢ 
            <span class="track-count">{{tracks.total}} tracks</span>
          </p>
        </div>
      </div>
    </div>
    {{/each}}
  </script>

  <script id="no-results-template" type="text/x-handlebars-template">
    <div class="no-results">
      <p>No results found.</p>
    </div>
  </script>
</body>
</html>